# Agent Guide: Using Git Tools (High-Level)

This guide provides a high-level overview for an Agent on how to use the available Git tools to assist users with common Git workflows. It maps typical user requests to the appropriate tool and its essential parameters in a table format.

**Agent Execution Model:** The Agent will attempt to execute the requested Git command directly using the appropriate tool based on the user's request. Each request is treated as a "one-shot" action.

**Important:** Before executing most Git commands, the Agent should ensure a working directory is set using the `git_set_working_dir` tool. If the user's request implies a specific repository path, the Agent should use `git_set_working_dir` first, validating that it's a Git repository. Subsequent tool calls can then often use the default `path: '.'`.

## Common Git Workflows and Tool Usage

| User Ask (Common Phrases)                                  | Tool Name                 | Essential Parameters                                                                 | Agent Action                                                                                                                               |
| :--------------------------------------------------------- | :------------------------ | :----------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------- |
| "What's the status of my repository?", "Are there changes?" | `git_status`              | `path` (use `.` if working directory is set)                                         | Call `git_status`. Report current branch, cleanliness, and list changes (staged, unstaged, untracked, conflicted) based on the JSON result. |
| "Stage all changes", "Add file.txt", "Stage changes in src" | `git_add`                 | `path` (use `.`), `files` (specify files/patterns like `.`, `"file.txt"`, `["src/"]`) | Call `git_add`. Confirm changes are staged.                                                                                                |
| "Commit staged changes with message '...'"                 | `git_commit`              | `path` (use `.`), `message` (extract from user ask)                                  | Call `git_commit`. Report success, commit hash. Inform if nothing to commit.                                                               |
| "Push my changes", "Push to origin main"                   | `git_push`                | `path` (use `.`), `remote` (infer), `branch` (infer)                                 | Call `git_push`. Report outcome (success, up-to-date, rejected). If rejected, explain the reason. Use caution with force options.          |
| "Pull latest changes", "Pull from origin develop"          | `git_pull`                | `path` (use `.`), `remote` (infer), `branch` (infer)                                 | Call `git_pull`. Report outcome (success, up-to-date, conflicts). If conflicts occur, instruct the user to resolve them manually.          |
| "List branches", "Create branch 'feature/xyz'", "Delete branch 'old'", "Rename branch 'bugfix' to 'hotfix'" | `git_branch`              | `path` (use `.`), `mode` (list, create, delete, rename), `branchName`, `newBranchName` (for rename), `all` (for list) | Call `git_branch`. Display branches for list mode. Report success for other modes. Use caution with force options.                         |
| "Switch to branch 'develop'", "Checkout commit abc123", "Restore file.txt" | `git_checkout`            | `path` (use `.`), `branchOrPath` (specify target branch, commit, or file path)       | Call `git_checkout`. Report outcome, including the new current branch or confirmation of file restoration. Use caution with force option.    |
| "Viewing Commit History"                                   | `git_log`                 | `path` (use `.`), `maxCount` (if specified), `author` (if specified), `branchOrFile` (if specified) | Call `git_log`. Present list of commits.                                                                                                   |
| "Initialize a new Git repository here"                     | `git_init`                | `path` (specify absolute path)                                                       | Call `git_init`. Report success and path.                                                                                                  |
| "Clone repo https://... into /path/..."                    | `git_clone`               | `repositoryUrl` (extract URL), `targetPath` (specify absolute path)                  | Call `git_clone`. Report success and path.                                                                                                 |
| "List remotes", "Add remote 'upstream' ...", "Remove remote 'origin'" | `git_remote`              | `path` (use `.`), `mode` (list, add, remove), `name` (for add/remove), `url` (for add) | Call `git_remote`. Display remotes for list mode. Report success for other modes.                                                          |
| "Cherry-pick commit abc123"                                | `git_cherry_pick`         | `path` (use `.`), `commitRef` (specify commit reference)                             | Call `git_cherry_pick`. Report outcome (success, commit created, conflicts). If conflicts occur, instruct on resolution.                   |
| "Managing Stashed Changes"                                 | `git_stash`               | `path` (use `.`), `mode` (list, save, apply, pop, drop), `stashRef` (for apply/pop/drop), `message` (for save) | Call `git_stash`. List stashes for list mode. Confirm operation for others.                                                                |
| "Reapplying Commits (Rebasing)"                            | `git_rebase`              | `path` (use `.`), `mode` (start, continue, abort, skip), `upstream` (for start)      | Call `git_rebase`. Report outcome. Provide instructions if manual intervention is needed.                                                  |
| "Resetting State"                                          | `git_reset`               | `path` (use `.`), `mode` (soft, mixed, hard), `commit` (specify)                     | Call `git_reset`. Report outcome and changes summary. **WARN USER EXPLICITLY IF USING `mode: 'hard'` as it is destructive.**                |
| "Removing Untracked Files"                                 | `git_clean`               | `path` (use `.`), `force` (must be `true`), `dryRun` (optional), `directories` (optional), `ignored` (optional) | Call `git_clean`. **WARN USER EXPLICITLY THIS IS DESTRUCTIVE.** Report files affected (or that would be affected in dry run). Requires `force: true`. |
